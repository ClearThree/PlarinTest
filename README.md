# API-сервис доступа к MongoDB.
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

Реализован в качестве тестового задания для Plarin.
Имеется API-метод на получение списка сотрудников, отфильтрованного по переданному признаку, его значению и опции.

Входные аргументы для метода GET employees:
* feature - имя признака, по которому нужно отфильтровать (name, salary, age и т.д. Признаки валидируются.)
* value - значение. Если передано без option, то ищется такой документ, в котором признак feature строго равен value.
* option - метод сравнения с value, принимаются gt, gte, lt, lte. (Больше, больше либо равно, меньше, меньше либо равно. Тоже валидируются.)

В ответ метод возвращает список отфильтрованных сотрудников.

### Как запускать?
Для удобства весь сервис завернут в docker-compose. Там поднимается и база, и сам API. Можно воспользоваться make-файлом для автоматизации шагов.

1. Клонируем репозиторий и заходим в него.
2. Выполняем ```make up``` или ```docker-compose up -d```
3. Сервис запущен, можно посмотреть [Swagger-документацию по /docs](http://localhost/docs), отсюда же можно покидать запросики.
4. Чтобы запустить тесты, можно выполнить команду ```make tests```. Для тестов должен работать контейнер с базой.
5. Автоформатирование кода выполняется командой ```make format```.
6. Остановить контейнеры: ```make down```.
7. Логи доступны по команде ```make logs```

### Что не сделано, но было бы круто сделать:
1. Отдельное тестовое окружение с базой. Запускать тесты на продовой базе не совсем верно, но для быстроты я решил прогонять их так. Можно лить данные туда через фикстуру, а можно постоянно поддерживать базу в тестовом окружении.
2. Добавить функционал пагинации ответов и сортировки. Решается добавлением нескольких query-параметров в эндпойнт, и небольшим усложнением запросов к базе.
3. Размещать сервис хотелось бы под доменом и, с потенциалом на рост нагрузок, под балансером. Для этого можно прямо в compose добавить nginx или traefik.